<!DOCTYPE html>
<html>
<head>
  <title>Show Table and List Example</title>
  <h1>Create Quote<h1>
  <link rel="stylesheet" href="style.css">
   <style>
    #myTable, #myList ,#myForm {
      display: none;
    }
  </style> 
  
  <script>
    function showTableAndList() {
      // get the table and list elements
      var table = document.getElementById("myTable");
      var list = document.getElementById("myList");
      var form =document.getElementById("myForm")
      
      // show the table and list by setting their display property to "table" and "block", respectively
      table.style.display = "table";
      list.style.display = "block";
      form.style.display = "block";
    }
  </script>
</head>
<body>
   <table>
    <tr>
      <td><a href="#" onclick="showTableAndList()">shingle</a></td>
      <td><a href="#" onclick="showTableAndList()">metal</a></td>
      <td><a href="#" onclick="showTableAndList()">cedar</a></td>
      <td><a href="#" onclick="showTableAndList()">composite</a></td>
      <td><a href="index2.html"  target="_self">flat</a></td>
    </tr>
  </table>
  <script>
   function showTableAndList2() {
      // get the table and list elements
      var table = document.getElementById("myTable2");
      var list = document.getElementById("myList");
      var form =document.getElementById("myForm2")
      
      // show the table and list by setting their display property to "table" and "block", respectively
      table.style.display = "table";
      list.style.display = "block";
      form.style.display = "block";
    }  
  </script>
  <script>
  const myLink = document.querySelector('#myLink');
  const myForm = document.querySelector('#myform');
  const myForm2 = document.querySelector('#myform2');

  myLink.addEventListener('click', function(event) {
    event.preventDefault(); // prevent default link behavior
    if (myForm) {
      myForm.parentNode.replaceChild(myForm2, myForm);
    }
  });
</script>
  <table id="myTable">
    <th>Services provided</th>
    <tr>
      <td>New Installation</td>
      <td>Upgrade</td>
      <td>Repair</td>
  </table>
  <ul id="myList">
    <li>Protect customer's and neighbors property</li>
    <li>Remove obsolete material at the completion of work</li>
    <li>inspect existing bords</li>
  </ul>
  <form id="myForm">
  <fieldset>
    <legend>Create Quote</legend>
    

    <label for="Choose-service">Choose service:</label>
  <select id="Choose-service" onchange="displaySubDropdown()">
    <option value="">Select an option</option>
    <option value="New Installation">New Installation</option>
    <option value="Upgrade">Upgrade</option>
    <option value="Repair">Repair</option>
    
  </select>

    <label for="main-dropdown">Choose:</label>
  <select id="main-dropdown" onchange="displaySubDropdown()">
    <option value="">Select an option</option>
    <option value="Shingle">Shingle</option>
    <option value="Metal">Metal</option>
    <option value="Cedar">Cedar</option>
    <option value="Composite">Composite</option>
  </select>

  <div id="sub-dropdown" style="display:none;">
    <label for="sub-dropdown-list">shingle list:</label>
    <select id="sub-dropdown-list">
      <option value="">Shingle list</option>
      <option value="item1">Suboption 1</option>
      <option value="item2">Suboption 2</option>
      <option value="item3">Suboption 3</option>
    </select>
  </div>

  <div id="sub-dropdown2" style="display:none;">
    <label for="sub-dropdown-list2">Choose color:</label>
    <select id="sub-dropdown-list2">
      <option value="">Choose color</option>
      <option value="color1">Suboption 1</option>
      <option value="color2">Suboption 2</option>
      <option value="color3">Suboption 3</option>
    </select>
  </div>

  <script>
    function displaySubDropdown() {
      var mainDropdown = document.getElementById("main-dropdown");
      var subDropdown = document.getElementById("sub-dropdown");
      var subDropdown2 =document.getElementById("sub-dropdown2")

      if (mainDropdown.value == "Shingle") {
        subDropdown.style.display = "block";
        subDropdown2.style.display = "block";
      } else {
        subDropdown.style.display = "none";
      }
      if (subDropdown.value == "b") {
        subDropdown.style.display = "none";
      } else {
        subDropdown2.style.display = "block";
      }
    }
  </script>
    
    <label for="myDropdown">Install Underlayments:</label>
    <select id="myDropdown" name="myDropdown">
      <option value="option1">Underlayment list</option>
      <option value="option1">Option 1</option>
      <option value="option2">Option 2</option>
      <option value="option3">Option 3</option>
      <label for="textarea">Describe:</label>
  <textarea id="textarea" name="textarea" rows="4" cols="50" placeholder="Describe"></textarea>
    </select>
    <label for="textarea">Install pre painted drop edge:</label>
  <textarea id="textarea" name="textarea" rows="4" cols="50" placeholder="Describe"></textarea>
     <label for="Install flashing">Install flashing:</label>
    <select id="Install flashing" name="myDropdown">
      <option value="option1">None</option>
      <option value="option1">Chimneys</option>
      <option value="option2">Walls</option>
      <option value="option3">Valleys</option>
    </select>
   
     <label for="Install skylight">Install skylight:</label>
    <select id="Install skylight" name="myDropdown">
      <option value="option1">None</option>
      <option value="option1">New</option>
      <option value="option2">Existing</option>
      </select>

      <label for="number-input">Install vents:</label>
  <input type="number" id="number-input" name="number-input" min="0" max="50">
       <label for="number-input">Aluminium:</label>
  <input type="number" id="number-input" name="number-input" min="0" max="" placeholder="Soffit">
  <input type="number" id="number-input" name="number-input" min="0" max="" placeholder="Fascia">
  <input type="number" id="number-input" name="number-input" min="0" max="" placeholder="Eaves">
  <input type="number" id="number-input" name="number-input" min="0" max="" placeholder="Down pipes">
  <input type="number" id="number-input" name="number-input" min="0" max="" placeholder="Leafs guard">
  <label for="textarea">Notes:</label>
  <textarea id="textarea" name="textarea" rows="4" cols="50" placeholder="write here"></textarea>

   
  </script>
 <button type="button" onclick="openPopup()">NEXT</button>


   <div id="popup" class="popup" style="display:none;">
  <div class="popup-content">
    <span class="close" onclick="closePopup()">&times;</span>
    <h2>Popup Form</h2>
             <table id="myTable2">&times;
          <thead>
            <tr>
              <th>Placeholder</th>
              <th>Unit Cost</th>
              <th>Quantity</th>
              <th>Cost</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="text" name="placeholder[]" /></td>
              <td><input type="number" name="unit_cost[]" min="0" /></td>
              <td><input type="number" name="quantity[]" min="0" /></td>
              <td><span class="cost"></span></td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td></td>
              <td></td>
              <td>Total:</td>
              <td><span id="totalCost"></span></td>
            </tr>
          </tfoot>
        </table>
        <button id="addRow">Add Row</button>
        <button id="submitBtn" onclick="submitForm()">Submit</button>



    <script>
      function openPopup() {
  document.getElementById("popup").style.display = "block";
}

      // Get the table element and the add row button
// Get the table element and the add row button
const table = document.getElementById('myTable2');
const addRowBtn = document.getElementById('addRow');

// Add a click event listener to the add row button
addRowBtn.addEventListener('click', (event) => {
  event.preventDefault(); // prevent default behavior of the button
  // Clone the first row in the table
  const newRow = table.rows[1].cloneNode(true);

  // Clear the input values in the cloned row
  newRow.querySelectorAll('input').forEach(input => input.value = '');

  // Append the cloned row to the table
  table.tBodies[0].appendChild(newRow);
});

// Add an input event listener to the table body
table.tBodies[0].addEventListener('input', event => {
  const target = event.target;
  if (target.nodeName === 'INPUT') {
    const row = target.parentNode.parentNode;
    const unitCost = parseFloat(row.querySelector('input[name="unit_cost[]"]').value) || 0;
    const quantity = parseFloat(row.querySelector('input[name="quantity[]"]').value) || 0;
    const cost = unitCost * quantity;
    row.querySelector('.cost').textContent = cost.toFixed(2);
    updateTotalCost();
  }
});

// Function to update the total cost
function updateTotalCost() {
  const costs = Array.from(document.querySelectorAll('.cost'))
    .map(cost => parseFloat(cost.textContent))
    .filter(cost => !isNaN(cost));
  const totalCost = costs.reduce((sum, cost) => sum + cost, 0);
  document.getElementById('totalCost').textContent = totalCost.toFixed(2);
}
function closePopup() {
  document.getElementById("popup").style.display = "none";
}
function submitForm() {
  // Get the table data
  const tableData = [];
  const rows = document.querySelectorAll('#myTable2 tbody tr');
  rows.forEach(row => {
    const rowData = [];
    row.querySelectorAll('input').forEach(input => {
      rowData.push(input.value);
    });
    tableData.push(rowData);
  });

  // Store the table data in localStorage
  localStorage.setItem('tableData', JSON.stringify(tableData));

  // Redirect to final.html
  window.location.href = 'final.html';
}



    </script>
    <table>
  <thead>
    <tr>
      <th>Item</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Total Cost</th>
    </tr>
  </thead>
  <tbody id="table-body">
  </tbody>
  <tfoot>
    <tr>
      <td colspan="3">Total:</td>
      <td id="total-cell">$0.00</td>
    </tr>
  </tfoot>
</table>



<script>

  const lookupTable = {
    "item1": 45.6,
    "item2": 8.99,
    "item3": 12.99,
  };

  const dropdown = document.getElementById("sub-dropdown-list");
  const tableBody = document.getElementById("table-body");
  const totalCell = document.getElementById("total-cell");

  dropdown.addEventListener("change", () => {
    const selectedValue = dropdown.value;
    if (selectedValue) {
      const itemName = dropdown.options[dropdown.selectedIndex].textContent;
      const itemPrice = lookupTable[selectedValue];
      const row = document.createElement("tr");
      const itemCell = document.createElement("td");
      itemCell.textContent = itemName;
      row.appendChild(itemCell);
      const priceCell = document.createElement("td");
      priceCell.textContent = "$" + itemPrice.toFixed(2);
      row.appendChild(priceCell);
      const quantityCell = document.createElement("td");
      const quantityInput = document.createElement("input");
      quantityInput.type = "number";
      quantityInput.value = 1;
      quantityInput.min = 1;
      quantityInput.addEventListener("input", () => {
        updateTotal();
      });
      quantityCell.appendChild(quantityInput);
      row.appendChild(quantityCell);
      const totalCostCell = document.createElement("td");
      const totalCost = itemPrice;
      totalCostCell.textContent = "$" + totalCost.toFixed(2);
      row.appendChild(totalCostCell);
      tableBody.appendChild(row);
      updateTotal();
    }
  });

  function updateTotal() {
    let total = 0;
    const rows = tableBody.querySelectorAll("tr");
    rows.forEach(row => {
      const priceCell = row.querySelector("td:nth-child(2)");
      const itemPrice = parseFloat(priceCell.textContent.replace("$", ""));
      const quantityCell = row.querySelector("td:nth-child(3) input");
      const quantity = parseFloat(quantityCell.value);
      const totalCostCell = row.querySelector("td:nth-child(4)");
      const totalCost = quantity * itemPrice;
      totalCostCell.textContent = "$" + totalCost.toFixed(2);
      total += totalCost;
    });
    totalCell.textContent = "$" + total.toFixed(2);
  }</script>
  </div>
</div>
 </fieldset>
</form>
</body>
</html>





